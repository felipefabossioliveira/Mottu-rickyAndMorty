<div class="container">
  <div class="container__content">
    <div class="container__content__search-box">
      <p class="container__content__search-box__title">In√≠cio</p>
      <app-search-autocomplete placeholder="Pesquisar personagem" (searchChange)="onSearchChange($event)"
        (suggestionSelected)="onSuggestionSelected($event)">
      </app-search-autocomplete>
    </div>

    <p class="container__content__count">
      {{ characters.length }} {{ characters.length === 1 && characters.length > 0 ? 'personagem' : 'personagens' }}
    </p>

    @if (isLoading) {
    <div class="container__content__characters">
      @for (i of [1,2,3,4,5,6,7,8,9]; track i) {
      <div class="skeleton-card"></div>
      }
    </div>
    }
    @else if (errorMessage) {
    <div class="container__content__error">
      <img src="assets/morty-gif.gif" alt="">
      <p class="container__content__error__title">{{ errorMessage }}</p>
      <p class="container__content__error__sub-title">Tente realizar uma nova busca</p>
    </div>
    }
    @else if (displayedCharacters.length > 0) {
    <div class="container__content__characters">
      @for (char of displayedCharacters; track char.id) {
      <app-character-card [character]="char" [isFavorite]="isFavorite(char)" (toggleFavorite)="onToggleFavorite($event)"
        (cardClick)="openModal($event)">
      </app-character-card>
      }
    </div>
    }

    @if (!isLoading && characters.length > itemsPerPage) {
    <app-pagination [currentPage]="currentPage" [totalPages]="totalPages" (pageChange)="onPageChange($event)">
    </app-pagination>
    }
  </div>
</div>

@if (selectedCharacter) {
<app-character-detail [character]="selectedCharacter" [allCharacters]="displayedCharacters"
  (close)="selectedCharacter = null" (toggleFavorite)="onToggleFavorite($event)">
</app-character-detail>
}